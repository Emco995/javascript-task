<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Users</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
</head>
<body>

    <div class="container-fluid text-white py-5" style="background-color: #1d2630;">
        <h1 class="text-center">All Users</h1>
    </div>

    <div class="container col-6 mt-5">
        <input type="text"
        class="form-control mb-5 p-3" 
        placeholder="Search User" 
        id="search-input">

       
     <ul class="list-group list-group-flush text-body-color h5">
        <% for(let user of users){ %>
            <li class="list-group-item p-3"><a href="/users/<%=user._id%>"><%= user.firstName %></a></li>
        <% } %>
    </ul>
        
    </div>


    <!-- <ul>
        <% for(let user of users){ %>
            <li><a href="/users/<%=user._id%>"><%= user.firstName %></a></li>
        <% } %>
    </ul> -->

    <a class="text-center" href="/users/new">Add new user</a>
    <a class="text-center" href="/">Home Page</a>

    <script>
        document.querySelector('#search-input').addEventListener('input', filterList)

        function filterList(){
            const searchInput = document.querySelector('#search-input');
            const filter = searchInput.value.toLowerCase();
            const listItems = document.querySelectorAll('.list-group-item');

            listItems.forEach((item) => {
                let text = item.textContent;
                if(text.toLowerCase().includes(filter.toLowerCase())){
                    item.style.display = '';
                } else {
                    item.style.display = 'none';
                }
            })
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>
</body>
</html>